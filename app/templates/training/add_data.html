{% extends 'base.html' %}

{% block title %}{% if data %}Edit{% else %}Add New{% endif %} Training Data{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
  <a href="{{ url_for('training.index') }}" class="btn secondary" style="margin-bottom: 15px;">â† Back to Training Data</a>
  <h1>{% if data %}âœï¸ Edit{% else %}â• Add New{% endif %} Training Data</h1>
</div>

<div class="card" style="max-width: 900px;">
  <form method="POST" action="{% if data %}{{ url_for('training.edit_data', data_id=data.id) }}{% else %}{{ url_for('training.new_data') }}{% endif %}">
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 500;">Category *</label>
      <select name="category" required style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px;">
        <option value="event" {% if data and data.category == 'event' %}selected{% endif %}>ğŸ“… Event</option>
        <option value="community" {% if data and data.category == 'community' %}selected{% endif %}>ğŸ‘¥ Community</option>
        <option value="faq" {% if data and data.category == 'faq' %}selected{% endif %}>â“ FAQ</option>
        <option value="product" {% if data and data.category == 'product' %}selected{% endif %}>ğŸ“¦ Product</option>
        <option value="other" {% if data and data.category == 'other' %}selected{% endif %}>ğŸ“‹ Other</option>
      </select>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 500;">Title *</label>
      <input type="text" name="title" value="{% if data %}{{ data.title }}{% endif %}" required
             placeholder="E.g., Annual Tech Conference 2025"
             style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px;">
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 500;">Content *</label>
      <textarea name="content" rows="8" required
                placeholder="Detailed information about this topic. Be comprehensive - the AI will use this to answer questions."
                style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px; font-family: inherit;">{% if data %}{{ data.content }}{% endif %}</textarea>
      <small style="color: #666;">Provide detailed information. The more context, the better the AI responses.</small>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
      <div>
        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Priority (1-10)</label>
        <input type="number" name="priority" min="1" max="10" value="{% if data %}{{ data.priority }}{% else %}5{% endif %}"
               style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px;">
        <small style="color: #666;">Higher priority = more likely to be used in responses</small>
      </div>
      
      <div>
        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Status</label>
        <label style="display: flex; align-items: center; gap: 10px; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px; cursor: pointer;">
          <input type="checkbox" name="is_active" {% if not data or data.is_active %}checked{% endif %}>
          <span>Active (Include in AI training)</span>
        </label>
      </div>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 500;">Tags (comma-separated)</label>
      <input type="text" name="tags" value="{% if existing_tags %}{{ existing_tags|join(', ') }}{% endif %}"
             placeholder="E.g., conference, technology, networking"
             style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px;">
      <small style="color: #666;">Keywords to help the AI find relevant information</small>
    </div>

    <div style="border-top: 2px solid #e9ecef; padding-top: 20px; margin-top: 20px;">
      <h3 style="margin-bottom: 15px;">ğŸ“… Event-Specific Information (Optional)</h3>
      
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Event Date & Time</label>
        <input type="datetime-local" name="event_date" value="{% if data and data.event_date %}{{ data.event_date.strftime('%Y-%m-%dT%H:%M') }}{% endif %}"
               style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px;">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Location</label>
        <input type="text" name="location" value="{% if data %}{{ data.location }}{% endif %}"
               placeholder="E.g., San Francisco Convention Center"
               style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px;">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Contact Information</label>
        <textarea name="contact_info" rows="3"
                  placeholder="Email, phone, website, or other contact details"
                  style="width: 100%; padding: 10px; border: 1.5px solid #e9ecef; border-radius: 6px; font-family: inherit;">{% if data %}{{ data.contact_info }}{% endif %}</textarea>
      </div>
    </div>

    <div style="display: flex; gap: 10px; margin-top: 25px;">
      <button type="submit" class="btn" style="background: #28a745; color: #fff; flex: 1;">
        ğŸ’¾ {% if data %}Update{% else %}Save{% endif %} Training Data
      </button>
      <a href="{{ url_for('training.index') }}" class="btn secondary">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
